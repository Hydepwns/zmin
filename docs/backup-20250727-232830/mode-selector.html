<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zmin Mode Selector - Choose the Right Performance Mode</title>
    <style>
        :root {
            --primary: #007bff;
            --eco: #28a745;
            --sport: #ffc107;
            --turbo: #dc3545;
            --gpu: #6610f2;
            --dark: #333;
            --light: #f8f9fa;
            --border: #dee2e6;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--light);
            min-height: 100vh;
        }
        
        .header {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
        }
        
        .main {
            padding: 2rem 0;
        }
        
        .hero {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }
        
        .hero p {
            font-size: 1.25rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .selector-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .question {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--light);
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .question.active {
            border-color: var(--primary);
            background: #e7f3ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,123,255,0.1);
        }
        
        .question h3 {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .question-number {
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .question.completed .question-number {
            background: var(--eco);
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .option-btn {
            padding: 1rem;
            border: 2px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .option-btn:hover {
            border-color: var(--primary);
            background: #f0f8ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .option-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .option-btn .title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .option-btn .desc {
            font-size: 0.875rem;
            opacity: 0.8;
        }
        
        .result {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        .result.show {
            display: block;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .mode-badge {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.25rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .mode-eco { background: var(--eco); color: white; }
        .mode-sport { background: var(--sport); color: black; }
        .mode-turbo { background: var(--turbo); color: white; }
        .mode-gpu { background: var(--gpu); color: white; }
        
        .command-box {
            background: #2d3748;
            color: #fff;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            position: relative;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 1rem;
        }
        
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.5rem 1rem;
            background: #4a5568;
            border: none;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: background 0.2s;
        }
        
        .copy-btn:hover {
            background: #5a6578;
        }
        
        .copy-btn.copied {
            background: var(--eco);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .stat-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .explanation {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .explanation h3 {
            margin-bottom: 1rem;
            color: var(--dark);
        }
        
        .explanation p {
            color: #666;
            line-height: 1.8;
        }
        
        .reset-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }
        
        .reset-btn:hover {
            background: #5a6268;
        }
        
        .quick-guide {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-top: 3rem;
        }
        
        .quick-guide h2 {
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .guide-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .guide-table th {
            background: var(--light);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--border);
        }
        
        .guide-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
        }
        
        .guide-table tr:hover {
            background: var(--light);
        }
        
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .command-box {
                font-size: 0.875rem;
                padding: 1rem;
            }
            
            .copy-btn {
                position: static;
                display: block;
                width: 100%;
                margin-top: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="https://zmin.droo.foo" class="logo">ðŸš€ zmin</a>
                <button class="reset-btn" onclick="resetSelector()">Reset</button>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="hero">
                <h1>Choose the Perfect zmin Mode</h1>
                <p>Answer three quick questions to find the optimal performance mode for your JSON minification needs</p>
            </div>

            <div class="selector-container">
                <div id="q1" class="question active">
                    <h3><span class="question-number">1</span> What's your file size?</h3>
                    <div class="options">
                        <button class="option-btn" onclick="setFileSize('tiny')">
                            <div class="title">< 1 MB</div>
                            <div class="desc">Small configs, API responses</div>
                        </button>
                        <button class="option-btn" onclick="setFileSize('small')">
                            <div class="title">1-10 MB</div>
                            <div class="desc">Medium datasets, logs</div>
                        </button>
                        <button class="option-btn" onclick="setFileSize('medium')">
                            <div class="title">10-100 MB</div>
                            <div class="desc">Large exports, databases</div>
                        </button>
                        <button class="option-btn" onclick="setFileSize('large')">
                            <div class="title">> 100 MB</div>
                            <div class="desc">Massive datasets, dumps</div>
                        </button>
                    </div>
                </div>

                <div id="q2" class="question">
                    <h3><span class="question-number">2</span> How much memory is available?</h3>
                    <div class="options">
                        <button class="option-btn" onclick="setMemory('minimal')">
                            <div class="title">< 100 MB</div>
                            <div class="desc">Embedded, IoT devices</div>
                        </button>
                        <button class="option-btn" onclick="setMemory('limited')">
                            <div class="title">100-500 MB</div>
                            <div class="desc">Containers, VMs</div>
                        </button>
                        <button class="option-btn" onclick="setMemory('moderate')">
                            <div class="title">500 MB - 2 GB</div>
                            <div class="desc">Standard servers</div>
                        </button>
                        <button class="option-btn" onclick="setMemory('plenty')">
                            <div class="title">> 2 GB</div>
                            <div class="desc">High-end systems</div>
                        </button>
                    </div>
                </div>

                <div id="q3" class="question">
                    <h3><span class="question-number">3</span> What's your priority?</h3>
                    <div class="options">
                        <button class="option-btn" onclick="setPriority('speed')">
                            <div class="title">Maximum Speed</div>
                            <div class="desc">Fastest possible processing</div>
                        </button>
                        <button class="option-btn" onclick="setPriority('memory')">
                            <div class="title">Memory Efficiency</div>
                            <div class="desc">Minimize RAM usage</div>
                        </button>
                        <button class="option-btn" onclick="setPriority('balanced')">
                            <div class="title">Balanced</div>
                            <div class="desc">Good all-around performance</div>
                        </button>
                        <button class="option-btn" onclick="setPriority('batch')">
                            <div class="title">Batch Processing</div>
                            <div class="desc">Many files to process</div>
                        </button>
                    </div>
                </div>

                <div id="result" class="result">
                    <div class="result-header">
                        <h2>Perfect Match Found!</h2>
                        <span id="mode-badge" class="mode-badge"></span>
                    </div>
                    
                    <div class="command-box">
                        <span id="command-text"></span>
                        <button class="copy-btn" onclick="copyCommand()">Copy</button>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="stat-throughput"></div>
                            <div class="stat-label">Throughput</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-memory"></div>
                            <div class="stat-label">Memory Usage</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-cpu"></div>
                            <div class="stat-label">CPU Usage</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-time"></div>
                            <div class="stat-label">Est. Time</div>
                        </div>
                    </div>
                    
                    <div class="explanation">
                        <h3 id="explanation-title"></h3>
                        <p id="explanation-text"></p>
                    </div>
                </div>
            </div>

            <div class="quick-guide">
                <h2>Quick Reference Guide</h2>
                <table class="guide-table">
                    <thead>
                        <tr>
                            <th>File Size</th>
                            <th>Memory</th>
                            <th>Priority</th>
                            <th>Mode</th>
                            <th>Performance</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>< 1 MB</td>
                            <td>< 100 MB</td>
                            <td>Any</td>
                            <td><span class="mode-badge mode-eco">ECO</span></td>
                            <td>~312 MB/s</td>
                        </tr>
                        <tr>
                            <td>1-10 MB</td>
                            <td>> 100 MB</td>
                            <td>Balanced</td>
                            <td><span class="mode-badge mode-sport">SPORT</span></td>
                            <td>~555 MB/s</td>
                        </tr>
                        <tr>
                            <td>10-100 MB</td>
                            <td>> 500 MB</td>
                            <td>Speed</td>
                            <td><span class="mode-badge mode-turbo">TURBO</span></td>
                            <td>~1.1 GB/s</td>
                        </tr>
                        <tr>
                            <td>> 100 MB</td>
                            <td>> 2 GB</td>
                            <td>Speed</td>
                            <td><span class="mode-badge mode-gpu">GPU</span></td>
                            <td>~2.0 GB/s</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <script>
        let selection = {
            fileSize: null,
            memory: null,
            priority: null
        };

        const fileSizeMap = {
            'tiny': 0.5,    // 0.5 MB average
            'small': 5,     // 5 MB average
            'medium': 50,   // 50 MB average
            'large': 500    // 500 MB average
        };

        function setFileSize(size) {
            selection.fileSize = size;
            markSelected('q1', event.target);
            markCompleted('q1');
            activateQuestion('q2');
            checkComplete();
        }

        function setMemory(mem) {
            selection.memory = mem;
            markSelected('q2', event.target);
            markCompleted('q2');
            activateQuestion('q3');
            checkComplete();
        }

        function setPriority(pri) {
            selection.priority = pri;
            markSelected('q3', event.target);
            markCompleted('q3');
            checkComplete();
        }

        function markSelected(questionId, button) {
            const buttons = document.querySelectorAll(`#${questionId} .option-btn`);
            buttons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
        }

        function markCompleted(questionId) {
            document.getElementById(questionId).classList.add('completed');
        }

        function activateQuestion(questionId) {
            document.querySelectorAll('.question').forEach(q => {
                q.classList.remove('active');
            });
            document.getElementById(questionId).classList.add('active');
            document.getElementById(questionId).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function checkComplete() {
            if (selection.fileSize && selection.memory && selection.priority) {
                showRecommendation();
            }
        }

        function determineMode() {
            const { fileSize, memory, priority } = selection;
            
            // GPU mode for large files with plenty of memory
            if (fileSize === 'large' && (memory === 'plenty' || memory === 'moderate')) {
                return 'gpu';
            }
            
            // ECO mode for minimal memory or memory priority
            if (memory === 'minimal' || priority === 'memory') {
                return 'eco';
            }
            
            // TURBO mode for speed priority with adequate resources
            if (priority === 'speed' && 
                (fileSize === 'medium' || fileSize === 'large') &&
                (memory === 'moderate' || memory === 'plenty')) {
                return 'turbo';
            }
            
            // TURBO for batch processing of larger files
            if (priority === 'batch' && (fileSize === 'medium' || fileSize === 'large')) {
                return 'turbo';
            }
            
            // ECO for tiny files with limited memory
            if (fileSize === 'tiny' && memory === 'limited') {
                return 'eco';
            }
            
            // Default to SPORT for balanced approach
            return 'sport';
        }

        function getPerformanceStats(mode) {
            const stats = {
                eco: { 
                    throughput: '~312 MB/s', 
                    memory: '64 KB', 
                    cpu: '1 core',
                    throughputNum: 312
                },
                sport: { 
                    throughput: '~555 MB/s', 
                    memory: '128 MB', 
                    cpu: '4 cores',
                    throughputNum: 555
                },
                turbo: { 
                    throughput: '~1.1 GB/s', 
                    memory: '256 MB', 
                    cpu: '8 cores',
                    throughputNum: 1100
                },
                gpu: { 
                    throughput: '~2.0 GB/s', 
                    memory: '2 GB', 
                    cpu: 'GPU',
                    throughputNum: 2000
                }
            };
            return stats[mode];
        }

        function calculateProcessingTime(mode) {
            const stats = getPerformanceStats(mode);
            const fileSizeMB = fileSizeMap[selection.fileSize];
            const timeSeconds = fileSizeMB / stats.throughputNum;
            
            if (timeSeconds < 1) {
                return Math.round(timeSeconds * 1000) + 'ms';
            } else {
                return timeSeconds.toFixed(1) + 's';
            }
        }

        function getExplanation(mode) {
            const explanations = {
                eco: {
                    title: 'Why ECO Mode?',
                    text: `ECO mode is perfect for your use case because it uses minimal memory (only 64KB) 
                          while still providing good performance at ~312 MB/s. This mode is ideal for embedded systems, 
                          IoT devices, or any memory-constrained environment. It processes data efficiently without 
                          requiring large memory buffers.`
                },
                sport: {
                    title: 'Why SPORT Mode?',
                    text: `SPORT mode offers the best balance between performance and resource usage. 
                           It provides ~555 MB/s throughput with moderate memory usage (128 MB), making it 
                           perfect for general-purpose JSON minification. This is our recommended default mode 
                           because it works well across a wide range of file sizes and system configurations.`
                },
                turbo: {
                    title: 'Why TURBO Mode?',
                    text: `TURBO mode maximizes CPU utilization across multiple cores to achieve 
                           ~1.1 GB/s throughput. This mode is ideal for processing large files when 
                           performance is critical and system resources are available. It uses advanced 
                           parallel processing and SIMD optimizations for maximum speed.`
                },
                gpu: {
                    title: 'Why GPU Mode?',
                    text: `GPU mode leverages CUDA or OpenCL acceleration to achieve ~2.0 GB/s throughput, 
                          making it optimal for very large files (>100MB). The massively parallel architecture 
                          of GPUs excels at processing large JSON datasets. This mode requires a compatible 
                          GPU but provides the highest possible performance.`
                }
            };
            return explanations[mode];
        }

        function showRecommendation() {
            const mode = determineMode();
            const stats = getPerformanceStats(mode);
            const explanation = getExplanation(mode);
            const processingTime = calculateProcessingTime(mode);
            
            // Update mode badge
            const badge = document.getElementById('mode-badge');
            badge.textContent = mode.toUpperCase();
            badge.className = `mode-badge mode-${mode}`;
            
            // Update command
            const command = mode === 'gpu' 
                ? 'zmin --gpu auto input.json output.json'
                : `zmin --mode ${mode} input.json output.json`;
            document.getElementById('command-text').textContent = command;
            
            // Update stats
            document.getElementById('stat-throughput').textContent = stats.throughput;
            document.getElementById('stat-memory').textContent = stats.memory;
            document.getElementById('stat-cpu').textContent = stats.cpu;
            document.getElementById('stat-time').textContent = processingTime;
            
            // Update explanation
            document.getElementById('explanation-title').textContent = explanation.title;
            document.getElementById('explanation-text').textContent = explanation.text;
            
            // Show result
            document.getElementById('result').classList.add('show');
            document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function copyCommand() {
            const commandText = document.getElementById('command-text').textContent;
            navigator.clipboard.writeText(commandText).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy';
                    btn.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = commandText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const btn = document.querySelector('.copy-btn');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        function resetSelector() {
            selection = {
                fileSize: null,
                memory: null,
                priority: null
            };
            
            // Reset UI
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelectorAll('.question').forEach(q => {
                q.classList.remove('completed', 'active');
            });
            document.getElementById('q1').classList.add('active');
            document.getElementById('result').classList.remove('show');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                resetSelector();
            }
        });
    </script>
</body>
</html>