{{ define "main" }}
{{ $api := .Site.Data.site.api }}
<div class="api-content">
    <h1>zmin API Reference</h1>
    <p>This is the API reference for the zmin JSON minifier library. The complete API documentation is available in JSON format at <a href="{{ $api.json_reference }}">{{ $api.json_reference }}</a>.</p>

    <h2 id="functions">Functions</h2>
    <p>The zmin library provides {{ $api.functions_count }} functions for JSON minification, validation, and processing.</p>

    <div class="function">
        <div class="function-name">minify</div>
        <div class="function-signature">pub fn minify(allocator: std.mem.Allocator, input: []const u8, mode: Mode) ![]u8</div>
        <div class="function-doc">Main minification function that takes JSON input and returns minified output.</div>
        <div class="parameter">
            <span class="parameter-name">allocator:</span> Memory allocator for the operation
        </div>
        <div class="parameter">
            <span class="parameter-name">input:</span> JSON string to minify
        </div>
        <div class="parameter">
            <span class="parameter-name">mode:</span> Minification mode (eco, sport, turbo)
        </div>
    </div>

    <div class="function">
        <div class="function-name">validate</div>
        <div class="function-signature">pub fn validate(input: []const u8) !void</div>
        <div class="function-doc">Validates JSON input for correctness.</div>
    </div>

    <h2 id="types">Types</h2>
    <p>The library defines {{ $api.types_count }} types for various operations and configurations.</p>

    {{ $modes := .Site.Data.site.project.modes }}
    <div class="type">
        <div class="type-name">Mode</div>
        <div class="function-doc">Enumeration of available minification modes.</div>
        {{ range $key, $mode := $modes }}
        <div class="field">
            <span class="field-name">{{ $key }}:</span> {{ $mode.description }}
        </div>
        {{ end }}
    </div>

    <div class="type">
        <div class="type-name">MinifierConfig</div>
        <div class="function-doc">Configuration structure for minifier behavior.</div>
        <div class="field">
            <span class="field-name">mode:</span> Minification mode
        </div>
        <div class="field">
            <span class="field-name">parallel:</span> Enable parallel processing
        </div>
        <div class="field">
            <span class="field-name">gpu:</span> Enable GPU acceleration
        </div>
    </div>

    <p><em>For complete API documentation, see the <a href="{{ $api.json_reference }}">JSON reference</a>.</em></p>
</div>

<style>
    /* API reference specific styles */
    .api-content {
        margin-right: 280px;
    }
    .function {
        background: var(--entry);
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid var(--accent);
        border-radius: 4px;
    }
    .function-name {
        color: var(--accent);
        font-weight: bold;
        font-size: 1.1em;
    }
    .function-signature {
        font-family: 'Courier New', monospace;
        margin: 5px 0;
        color: var(--secondary);
    }
    .parameter {
        margin: 5px 0;
        padding-left: 20px;
    }
    .parameter-name {
        color: var(--accent);
        font-weight: bold;
    }
    .type {
        background: var(--entry);
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid var(--accent);
        border-radius: 4px;
    }
    .type-name {
        color: var(--accent);
        font-weight: bold;
        font-size: 1.1em;
    }
    .field-name {
        color: var(--accent);
        font-weight: bold;
    }
    @media (max-width: 768px) {
        .api-content {
            margin-right: 0;
        }
    }
</style>
{{ end }}
