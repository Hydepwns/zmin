{{ define "main" }}
{{ $api := .Site.Data.site.api }}
<article class="doc-template api-reference">
  <header class="doc-header">
    <h1>zmin API Reference</h1>
    <p class="doc-description">This is the API reference for the zmin JSON minifier library. The complete API documentation is available in JSON format at <a href="{{ $api.json_reference }}">{{ $api.json_reference }}</a>.</p>
  </header>

  <div class="doc-content">
    <h2 id="functions">Functions</h2>
    <p>The zmin library provides {{ $api.functions_count }} functions for JSON minification, validation, and processing.</p>

    <div class="function">
      <h3>minify</h3>
      <div class="function-signature">pub fn minify(allocator: std.mem.Allocator, input: []const u8, mode: Mode) ![]u8</div>
      <p>Main minification function that takes JSON input and returns minified output.</p>
      <h4>Parameters:</h4>
      <ul>
        <li><strong>allocator:</strong> Memory allocator for the operation</li>
        <li><strong>input:</strong> JSON string to minify</li>
        <li><strong>mode:</strong> Minification mode (eco, sport, turbo)</li>
      </ul>
    </div>

    <div class="function">
      <h3>validate</h3>
      <div class="function-signature">pub fn validate(input: []const u8) !void</div>
      <p>Validates JSON input for correctness.</p>
    </div>

    <h2 id="types">Types</h2>
    <p>The library defines {{ $api.types_count }} types for various operations and configurations.</p>

    {{ $modes := .Site.Data.site.project.modes }}
    <div class="type">
      <h3>Mode</h3>
      <p>Enumeration of available minification modes.</p>
      <ul>
        {{ range $key, $mode := $modes }}
        <li><strong>{{ $key }}:</strong> {{ $mode.description }}</li>
        {{ end }}
      </ul>
    </div>

    <div class="type">
      <h3>MinifierConfig</h3>
      <p>Configuration structure for minifier behavior.</p>
      <ul>
        <li><strong>mode:</strong> Minification mode</li>
        <li><strong>parallel:</strong> Enable parallel processing</li>
        <li><strong>gpu:</strong> Enable GPU acceleration</li>
      </ul>
    </div>

    <p><em>For complete API documentation, see the <a href="{{ $api.json_reference }}">JSON reference</a>.</em></p>
  </div>
</article>
{{ end }}
